<!DOCTYPE html>
<html lang="en">

@@include('layout/head.html', {
    'title': '推算結果'
})
<link rel="stylesheet" href="css/shop.css">
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<body>
    <!-- 網頁頭 by NJ -->
    @@include('layout/header.html')
    <main id="twinklingStar">
        <div id="app">
            <!-- 星座頁籤 謝謝蘋姊拯救世界 by JC -->
            @@include('layout/con_page.html')
        </div>

            <!-- 星座命盤結果 by JC -->
            <section class="astrolabe chart" id="appList"> 
                <div class="container">
                    <div class="astrolabe_chart">
                        <!-- 宮位分類欄 有11個該死的宮位 -->
                        <div class="chart_classification">
                            <ul>
                                <li v-for="(chart,index) in charts" :class="{ active: index == num }" @click="tab(index)"><label>{{chart}}</label></li>
                            </ul>
                        </div>
                        
                        <!-- 左 === 星盤解讀 -->
                        <div class="parse_box card3d">                       
                            <!-- 星盤解讀分析內容的外框 用來包住大標和內文 -->
                            <div class="analyze_bg">
                                <!-- 星盤解讀大標題 -->
                                <div class="analyze_title">
                                    <h2>Analysis</h2>
                                </div>
                                <!-- 星盤解讀內文 -->
                                <div class="analyze_txt" v-for="(conTxt,index) in conTxts" v-show="index == num">
                                    <h3>{{conTxt.zodiac}}星座 {{conTxt.conName}}</h3>
                                    <!-- <h4>－配合、協調才能將合作能量極大化－</h4> -->
                                    <p>{{conTxt.conAnalyze}}</p>
                                </div>
                            </div>
                        </div>    
                        <!-- 右 === 個資+命盤 -->     
                        <div class="chart_info">
                            <!-- 個人資訊 -->
                            <div class="chart_txt">
                                <p>男 | 小陳</p>
                                <p>1998年10月10日 15:30</p>
                            </div>
                            <!-- 命盤圖 -->
                            <div class="img_box chart_img">
                                <img src="images/constellation/fakechart.png">
                            </div>
                            <!-- 貓頭鷹分類 -->
                            <div class="owl-carousel owl-theme display">
                                <div class="item chart_list" v-for="chart in charts" ><label>{{chart}}</label></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- 主打商品卡片 by JC -->
            <section class="products_cards">
                <div class="container">
                    <div class="products_box">
                        <!-- 左欄標題和底圖 大容器 -->
                        <div class="products_title_wrap">
                            <h2>主打商品</h2>
                        </div>
                        <!-- 卡品 大容器 -->
                        <div class="shop_product_item">
                            <!-- 產品卡片-->
                               
                               <div class="shop_product_card">
                                    <a href="shop.html">
                                    <div class="shop_product_card_img">
                                        <img src="images/shop/Constellation/wristband/wristband_libra.png">
                                    </div>
                                    <div class="shop_product_card_txt">
                                        <h4>星座手環-天秤座</h4>
                                        <h4>NT$1,299</h4>
                                    </div>
                                    <div class="shop_product_card_icon">
                                        <img src="images/icon/icon_shop_eye.svg">
                                    </div>
                                    </a>
                               </div>
                           
  
                               <div class="shop_product_card">
                                    <a href="shop.html">
                                        <div class="shop_product_card_img">
                                            <img src="images/shop/Constellation/wristband/wristband_scorpio.png">
                                        </div>
                                        <div class="shop_product_card_txt">
                                            <h4>星座手環-天蠍座</h4>
                                            <h4>NT$1,299</h4>
                                        </div>
                                        <div class="shop_product_card_icon">
                                            <img src="images/icon/icon_shop_eye.svg">
                                        </div>
                                    </a>
                               </div>

   
                               <div class="shop_product_card">
                                    <a href="shop.html">
                                        <div class="shop_product_card_img">
                                            <img src="images/shop/Constellation/wristband/wristband_sagittarius.png">
                                        </div>
                                        <div class="shop_product_card_txt">
                                            <h4>星座手環-射手座</h4>
                                            <h4>NT$1,299</h4>
                                        </div>
                                        <div class="shop_product_card_icon">
                                            <img src="images/icon/icon_shop_eye.svg">
                                        </div>
                                    </a>
                               </div>
                               <div class="shop_product_card">
                                <a href="shop.html">
                                    <div class="shop_product_card_img">
                                        <img src="images/shop/Constellation/wristband/wristband_gemini.png">
                                    </div>
                                    <div class="shop_product_card_txt">
                                        <h4>星座手環-雙子座</h4>
                                        <h4>NT$1,299</h4>
                                    </div>
                                    <div class="shop_product_card_icon">
                                        <img src="images/icon/icon_shop_eye.svg">
                                    </div>
                                </a>
                           </div>

                       </div>
                    </div>
                </div>
            </section>
            
    </main>
    <!-- 網頁尾 By NJ -->
    @@include('layout/footer.html')
    <script>
        new Vue({
            el: '#app',
            data: { //變數放這
                urls: {
                    '今日運勢': 'con_today_fortune.html',
                    '星座配對': 'con_pair.html',
                    '真實星座': 'con_real_constellation.html',
                    '星盤推算': 'astrolabe.html',
                    '星座故事': 'con_story.html',
                    '星座討論區': 'discuss.html',
                },
                navs: ['今日運勢','星座配對','真實星座','星盤推算','星座故事','星座討論區'],
            },
            
        });
        new Vue({
            el: '#appList',
            data: {
                conTxts: [],
                charts: ['上升','太陽','月亮','水星','金星','火星','木星','土星','天王','海王','冥王'],
                list: '',
                num: 0,

            },
            methods: {
                tab(index){
                    this.num == index;
                }
            },
            mounted() {
                fetch('./js/constellation_detail.json')
                .then(res => res.json())
                .then(res => this.conTxts = res)
            },
        });

        const card = document.querySelector(".card3d");
        const motionMatchMedia = window.matchMedia("(prefers-reduced-motion)");
        const THRESHOLD = 15;

        function handleHover(e) {
        const { clientX, clientY, currentTarget } = e;
        const { clientWidth, clientHeight, offsetLeft, offsetTop } = currentTarget;

        const horizontal = (clientX - offsetLeft) / clientWidth;
        const vertical = (clientY - offsetTop) / clientHeight;
        const rotateX = (THRESHOLD / 2 - horizontal * THRESHOLD).toFixed(2);
        const rotateY = (vertical * THRESHOLD - THRESHOLD / 2).toFixed(2);

        card.style.transform = `perspective(${clientWidth}px) rotateX(${rotateY}deg) rotateY(${rotateX}deg) scale3d(1, 1, 1)`;
        }

        function resetStyles(e) {
        card.style.transform = `perspective(${e.currentTarget.clientWidth}px) rotateX(0deg) rotateY(0deg)`;
        }

        if (!motionMatchMedia.matches) {
        card.addEventListener("mousemove", handleHover);
        card.addEventListener("mouseleave", resetStyles);
        }

        $(document).ready(function(){
            $('.owl-carousel').owlCarousel({
                stagePadding: 10,
                loop:true,
                margin:5,
                nav:false,
                responsive:{
                    0:{
                        items:5
                    },
                    767:{
                        items:8
                    },

                }
            });
        });
        
        // for(var i = 0; i < 500; i++) {
        //         //get random dimensions
        //         var x = Math.random() * 100;
        //         var y = Math.random() * 100;
        //         var d = Math.random() * 4;
        //         var s = Math.random() * 2 + 1.5;
        //         //create new element and add to html
        //         var star = document.createElement("div");
        //         star.classList.add("star");
        //         var sky = document.getElementById("twinklingStar");
        //         sky.appendChild(star);

        //         star.style.width = d + "px";
        //         star.style.height = d + "px";
        //         star.style.top = y + "%";
        //         star.style.left = x + "%";
        //         star.style.animationDuration = s + "s";
        //     }
    </script>
</body>
</html>