<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>解星鏡 Mistro | 登入</title>
    <!-- 瀏覽器頁籤圖示由 common.js 插入 by PIN -->
</head>
<body>
    
<!-- 網頁頭 -->
<!-- 內容由 common.js 新增 by PIN -->
<header class="main_header"></header>


<!-- 網頁內容 by PIN -->
<main>

<!-- 登入 -->
    <section class="member login" id="app">
        <div class="container">

            <!-- 登箱 -->
            <div class="login_box">
                <!-- 登箱上方logo -->
                <div class="logo">
                    <div class="img_box sticker">
                        <img src="images/logo_ico_square.ico" alt="logo">
                    </div>
                    <div class="txt_box">
                        <h2>Mistro</h2>
                    </div>
                </div>
        
                <!-- 使用者資訊 -->
                <form class="login_info">
                    <!-- 帳號 -->
                    <div class="item mem_id">
                        <label for="mem_id">帳號</label>
                        <input type="text" id="mem_id">
                    </div>
        
                    <!-- 密碼 -->
                    <div class="item mem_pwd">
                        <label for="mem_pwd">密碼</label>
                        <input type="password" id="mem_pwd">
                    </div>

                    <!-- 忘記密碼 -->
                    <div class="item forgot_pwd">
                        <a href="#">忘記密碼</a>
                    </div>

                    <!-- 登入 -->
                    
                    <button class="item primary_btn" @click.prevent="checkLogin">
                        登入
                        <!-- <a href="member.html">登入</a> -->
                    </button>
        
                    <!-- 註冊 -->
                    <div class="item sign_up">
                        <span>新朋友?
                            <a href="sign_up.html">註冊</a>
                        </span>
                    </div>
                </form>
            </div>

        </div>
    </section>

</main>


<!-- 網頁尾 -->
<!-- 內容由 common.js 新增 by PIN -->
<footer class="main_footer"></footer>

<script src="js/common.js"></script>
<script src="js/jquery.js"></script>
<script src="js/vue.js"></script>
</body>
</html>

<script>
    $(document).ready(function() {
        new Vue({
            el: '#app',
            data: {
                
            },
            methods: {
                // 依選擇項目取得資料表
                checkLogin(e) {

                    let thisVue = this;
                    $.ajax({
                        type: 'POST',
                        url: 'php/login.php',
                        data: {
                            memId: $('#mem_id').val(),
                            memPwd: $('#mem_pwd').val(),
                        },
                        success: function(data) {
                            if (data.login) {
                                window.location.href = 'index.html';
                            }
                            else {
                                alert(data.msg);
                            }
                        },
                        error: function() {
                            console.log('error');
                        }
                    });
                }
            }
        });
    });
</script>